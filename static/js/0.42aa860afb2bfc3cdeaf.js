webpackJsonp([0],{VrfC:function(e,t,n){e.exports=n.p+"static/img/icon.93be6f2.png"},hiq7:function(e,t){},mJTh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),o=n("exGp"),i=n.n(o),c=n("gyMJ"),r=n("Au9i"),l={name:"Login",data:function(){return{phone:"",phoneCode:"",userName:"",password:"",captcha:"",loginType:!0,countDown:0,isShowPassword:!1,captchaSrc:"http://localhost:3000/api/captcha"}},methods:{changeLoginType:function(){this.loginType=!this.loginType},changePwdShow:function(){this.isShowPassword=!this.isShowPassword},getValidateCode:function(){var e=this;return i()(s.a.mark(function t(){var n,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkPhone){t.next=7;break}return e.countDown=60,n=setInterval(function(){e.countDown--,0===e.countDown&&clearInterval(n)},1e3),t.next=5,Object(c.l)(e.phone);case 5:200===(a=t.sent).success_code?r.MessageBox.alert("手机验证码为："+a.data):(r.MessageBox.alert("获取手机验证码失败"),clearInterval(n),e.countdown=0);case 7:case"end":return t.stop()}},t,e)}))()},refreshCaptcha:function(){this.captchaSrc="http://localhost:3000/api/captcha?time="+new Date},login:function(){var e=this;return i()(s.a.mark(function t(){var n,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loginType){t.next=19;break}if(""!==e.phone){t.next=5;break}r.MessageBox.alert("请输入手机号码"),t.next=17;break;case 5:if(e.checkPhone){t.next=9;break}r.MessageBox.alert("请输入正确的手机号码"),t.next=17;break;case 9:if(""!==e.phoneCode){t.next=13;break}r.MessageBox.alert("请输入手机验证码"),t.next=17;break;case 13:return t.next=15,Object(c.u)(e.phone,e.phoneCode);case 15:200===(n=t.sent).success_code?(Object(r.Toast)({message:"登录成功",position:"middle",duration:2e3}),e.$router.go(-1)):r.MessageBox.alert(n.message);case 17:t.next=35;break;case 19:if(""!==e.userName){t.next=23;break}r.MessageBox.alert("请输入用户名"),t.next=35;break;case 23:if(""!==e.password){t.next=27;break}r.MessageBox.alert("请输入密码"),t.next=35;break;case 27:if(""!==e.captcha){t.next=31;break}r.MessageBox.alert("请输入验证码"),t.next=35;break;case 31:return t.next=33,Object(c.v)(e.userName,e.password,e.captcha);case 33:200===(a=t.sent).success_code?(Object(r.Toast)({message:"登录成功",position:"middle",duration:2e3}),e.$router.go(-1)):(r.MessageBox.alert(a.message),e.refreshCaptcha());case 35:case"end":return t.stop()}},t,e)}))()}},computed:{checkPhone:function(){return/^1[3|4|5|6|7|8][0-9]{9}$/.test(this.phone)}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"top"},[n("span",{staticClass:"icon-close",on:{click:function(t){return e.$router.go(-1)}}})]),e._v(" "),n("div",{staticClass:"login-container"},[e._m(0),e._v(" "),n("div",{staticClass:"login-content"},[n("div",{staticClass:"login-type"}),e._v(" "),n("div",{staticClass:"login-main"},[n("form",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loginType,expression:"loginType "}],staticClass:"login-phone"},[n("section",{staticClass:"login-info"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"tel",placeholder:"手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e._v(" "),0===e.countDown?n("button",{class:{phone_right:e.checkPhone},on:{click:function(t){return t.preventDefault(),e.getValidateCode(t)}}},[e._v("\n                获取验证码\n              ")]):n("button",{staticClass:"phone_right"},[e._v("\n                重新获取("+e._s(e.countDown)+"s)\n              ")])]),e._v(" "),n("section",{staticClass:"login-info login-verification"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"}],attrs:{type:"tel",placeholder:"验证码"},domProps:{value:e.phoneCode},on:{input:function(t){t.target.composing||(e.phoneCode=t.target.value)}}})]),e._v(" "),e._m(1)]),e._v(" "),n("button",{staticClass:"login-submit",on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("\n            登录\n          ")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-header logo"},[t("img",{staticClass:"icon",staticStyle:{width:"30%",height:"auto"},attrs:{src:n("VrfC")}}),this._v(" "),t("p",{staticClass:"title"},[this._v("影迷营地")]),this._v(" "),t("i",{staticClass:"eng-title"},[this._v("Movie Land")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"login-info login-hint"},[this._v("\n              温馨提示：未注册的手机号，验证后将自动注册账户，且代表已同意\n              "),t("a",{attrs:{href:"javascript:;"}},[this._v("《服务协议与隐私政策》")])])}]};var u=n("VU/8")(l,h,!1,function(e){n("hiq7")},"data-v-35f91394",null);t.default=u.exports}});
//# sourceMappingURL=0.42aa860afb2bfc3cdeaf.js.map